# 系统设计与扩展性

面对一个较为抽象的实际应用问题，如果需要设计相应系统（system design）并足以应对可能的扩展性（scalability）问题，其实是有一定的路径可寻。为起到一个概括性的提示作用，小结如下：

1. **厘清问题**：首先需要对面临的问题或需求本身进行厘清，特别是确定其中模糊的描述的实际含义到底是什么，这样才能有效限定解决问题的范围和方向。

2. **合理假设**： 除了问题本身的要求，通常还需要进行更进一步的限定以缩小问题大小和条件。这时根据应用的实际情境和流程做出符合客观情况的假设就变得非常重要了。

3. **明确简化**： 然后明确到底设计的是整个系统的架构还是其中一个子模块也是非常关键的，否则便会做很多画蛇添足的工作。同时面对复杂的问题，我们可以从相对简单的情况切入来考虑解决问题，比如：需要解决大用户量的问题，首先考虑小用户量时的方案；分布式的问题则可以先考虑单机情况下的流程。

4. **画流程图**：根据简化以后的问题，画出系统涉及问题的主要组成部分以及相互关系的简图。这样有助于我们分解问题逐个击破各个环节。在简图完成后尝试解释一个完整的流程从开始到结束一个完整周期在系统中具体的步骤是如何演变的。这样基本能够形成简化后问题的基本解决方案。

5. **锁定难点**：此时回到本来的问题，相对简化后的问题其复杂性（或是难以扩展）是如何带来的？根据具体的难点进行分析和联想到相应的应对方法。常见的一些问题可能包括：输入的数据集可能会非常之大，此时很可能需要考虑分布式的方法，进而联想到哈希表来进行查找不同机器；如果是不同的数据请求之间出现频率差别很大，或应用具有大量的读入（read）操作，那么引入缓存（cache）会是可能的解决之道；相反如果写入操作频繁，则引入异步(asynchronous)机制或排队（queue）可能会有利于整体调度。

6. **重构方案**：根据对难点分析和应对，对此前的简化版方案进行调整或完全重建，形成能够应对复杂情况的完整方案。

7. **权衡分析**： 方案完成后可分析其优势和牺牲的性能之间的关系是否得当。